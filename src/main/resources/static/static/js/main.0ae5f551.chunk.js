(this.webpackJsonplab4_react=this.webpackJsonplab4_react||[]).push([[0],{28:function(e,t,a){e.exports=a(39)},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(18),s=a.n(o),i=a(16),l=a(5),u=a(2),c=a(3),p=a(6),h=a(4),d=a(7),v=a(15),m=(a(37),function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).sendLoginRequest=function(){a.props.dispatch({type:"APP_LOGIN",value:{history:a.props.history}})},a.redirectToRegister=function(){a.props.history.push("/register")},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"main"},n.a.createElement("h2",null,"Username"),n.a.createElement("input",{type:"text",value:this.props.login,onChange:function(t){return e.props.dispatch({type:"LOGIN_SET_LOGIN",value:t.target.value.replace(" ","")})}}),n.a.createElement("h2",null,"Password"),n.a.createElement("input",{type:"password",value:this.props.password,onChange:function(t){return e.props.dispatch({type:"LOGIN_SET_PASSWORD",value:t.target.value})}}),n.a.createElement("br",null),n.a.createElement("div",{className:this.props.error?"warn":"hidden"},"Invalid username or password"),n.a.createElement("button",{className:"submit-button",disabled:!this.props.formCorrect,onClick:this.sendLoginRequest},"Sign in"),n.a.createElement("button",{className:"submit-button",onClick:this.redirectToRegister},"Sign up"))}}]),t}(n.a.Component)),E=Object(l.b)((function(e){return{user:e.appState.user,login:e.loginState.login,password:e.loginState.password,error:e.loginState.error,formCorrect:e.loginState.formCorrect}}))(m),g=Object(v.f)((function(e){return n.a.createElement(E,{history:e.history})})),S=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("select",{onChange:function(t){return e.props.dispatch({type:"MAIN_SET_X",value:t.target.value})}},n.a.createElement("option",{value:"-4",name:"x",selected:-4===this.props.x},"-4"),n.a.createElement("option",{value:"-3",name:"x",selected:-3===this.props.x},"-3"),n.a.createElement("option",{value:"-2",name:"x",selected:-2===this.props.x},"-2"),n.a.createElement("option",{value:"-1",name:"x",selected:-1===this.props.x},"-1"),n.a.createElement("option",{value:"0",name:"x",selected:0===this.props.x},"0"),n.a.createElement("option",{value:"1",name:"x",selected:1===this.props.x},"1"),n.a.createElement("option",{value:"2",name:"x",selected:2===this.props.x},"2"),n.a.createElement("option",{value:"3",name:"x",selected:3===this.props.x},"3"),n.a.createElement("option",{value:"4",name:"x",selected:4===this.props.x},"4"))}}]),t}(n.a.Component),y=Object(l.b)((function(e){return{x:e.mainState.xField}}))(S),f=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("select",{onChange:function(t){return e.props.dispatch({type:"MAIN_SET_R",value:t.target.value})}},n.a.createElement("option",{value:"4",name:"r",selected:4===this.props.r},"-4"),n.a.createElement("option",{value:"3",name:"r",selected:3===this.props.r},"-3"),n.a.createElement("option",{value:"2",name:"r",selected:2===this.props.r},"-2"),n.a.createElement("option",{value:"1",name:"r",selected:1===this.props.r},"-1"),n.a.createElement("option",{value:"0",name:"r",selected:0===this.props.r},"0"),n.a.createElement("option",{value:"1",name:"r",selected:1===this.props.r},"1"),n.a.createElement("option",{value:"2",name:"r",selected:2===this.props.r},"2"),n.a.createElement("option",{value:"3",name:"r",selected:3===this.props.r},"3"),n.a.createElement("option",{value:"4",name:"r",selected:4===this.props.r},"4"))}}]),t}(n.a.Component),b=Object(l.b)((function(e){return{r:e.mainState.rField}}))(f),O=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"canvas-div"},n.a.createElement("canvas",{ref:"canvas",height:"450px",width:"450px",onClick:function(t){return e.handleClick(t)}}))}},{key:"componentDidMount",value:function(){this.canvas=this.refs.canvas,this.i=40,this.updateCanvas()}},{key:"componentDidUpdate",value:function(e,t,a){this.updateCanvas()}},{key:"updateCanvas",value:function(){this.clear(this.canvas),this.drawArea(this.props.r,this.i,this.canvas),this.drawAxis(this.i,this.canvas);var e=!0,t=!1,a=void 0;try{for(var r,n=this.props.points[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var o=r.value;this.drawPoint(o.x,o.y,o.ch?"lime":"red",this.i,this.canvas)}}catch(s){t=!0,a=s}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}}},{key:"drawAxis",value:function(e,t){var a=t.getContext("2d"),r=t.height,n=t.width;a.strokeStyle="black",a.lineWidth=1,a.beginPath(),a.moveTo(n/2,r),a.lineTo(n/2,0),a.lineTo(n/2+3,7),a.moveTo(n/2,0),a.lineTo(n/2-3,7),this.drawDigitsX(a,e,n,r),a.stroke(),a.beginPath(),a.moveTo(0,r/2),a.lineTo(n,r/2),a.lineTo(n-7,r/2+3),a.moveTo(n,r/2),a.lineTo(n-7,r/2-3),this.drawDigitsY(a,e,n,r),a.stroke(),a.strokeStyle="black",a.lineWidth=1,a.moveTo(n/2-3*e,r/2-5*e)}},{key:"drawDigitsX",value:function(e,t,a,r){for(var n=a/2,o=0;o<5;o++)n+=t,e.moveTo(n,r/2+3),e.lineTo(n,r/2-3);n=a/2;for(var s=0;s<5;s++)n-=t,e.moveTo(n,r/2+3),e.lineTo(n,r/2-3)}},{key:"drawDigitsY",value:function(e,t,a,r){for(var n=r/2,o=0;o<5;o++)n+=t,e.moveTo(a/2+3,n),e.lineTo(a/2-3,n);n=r/2;for(var s=0;s<5;s++)n-=t,e.moveTo(a/2+3,n),e.lineTo(a/2-3,n)}},{key:"drawArea",value:function(e,t,a){var r=a.getContext("2d"),n=a.height,o=a.width;r.strokeStyle="#24502D",r.fillStyle="#24502D",r.beginPath(),r.moveTo(o/2,n/2),r.arc(o/2,n/2,e*t,0,-Math.PI/2,!0),r.moveTo(o/2,n/2),r.lineTo(o/2,n/2+e*t),r.lineTo(o/2-e/2*t,n/2),r.lineTo(o/2,n/2),r.moveTo(o/2,n/2),r.lineTo(o/2+e*t,n/2),r.lineTo(o/2+e*t,n/2+e*t),r.lineTo(o/2,n/2+e*t),r.moveTo(o/2,n/2),r.fill()}},{key:"clear",value:function(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}},{key:"handleClick",value:function(e){var t=e.target,a=Number(((e.pageX-window.pageXOffset-t.getBoundingClientRect().x-t.width/2)/this.i).toFixed(2)),r=Number((-(e.pageY-window.pageYOffset-t.getBoundingClientRect().y-t.height/2)/this.i).toFixed(2));a<-4||a>4||r<-3||r>3||this.props.dispatch({type:"MAIN_ADD_POINT",value:{x:a,y:r,r:this.props.r}})}},{key:"drawPoint",value:function(e,t,a,r,n){var o=n.getContext("2d");o.fillStyle=a,o.beginPath(),o.arc(n.width/2+e*r,n.height/2-t*r,2,0,2*Math.PI,!0),o.fill()}}]),t}(n.a.Component),_=Object(l.b)((function(e){return{points:e.appState.drawing,r:e.mainState.rField}}))(O),T=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).deleteButton=function(e){return n.a.createElement("button",{className:"r-button",onClick:function(t){a.props.dispatch({type:"MAIN_DELETE_POINT",value:e})}},"Delete")},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=[],t=this.props.points,a=!0,r=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var l=s.value,u=l;e.push(n.a.createElement("tr",{key:l.id},n.a.createElement("td",null,u.x),n.a.createElement("td",null,u.y),n.a.createElement("td",null,l.r),n.a.createElement("td",null,"".concat(u.checked)),n.a.createElement("td",null,this.deleteButton(l))))}}catch(c){r=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("table",{className:"result-table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"X"),n.a.createElement("th",null,"Y"),n.a.createElement("th",null,"R"),n.a.createElement("th",null,"Result"),n.a.createElement("th",null,"Change"))),n.a.createElement("tbody",null,e)))}}]),t}(n.a.Component),N=Object(l.b)((function(e){return{points:e.appState.points,currentPoint:e.mainState.currentPoint,x:e.mainState.xChange,y:e.mainState.yChange}}))(T),P=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).exit=function(){a.props.dispatch({type:"APP_LOGOUT",value:{history:a.props.history}})},null===a.props.user?a.props.history.push("/login"):a.props.dispatch({type:"APP_GET_POINTS",value:{history:a.props.history}}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"main"},n.a.createElement("h2",{id:"hello"},"Hello, ",this.props.user,". Check your points here!"),n.a.createElement(_,null),n.a.createElement("h2",null,"Choose X:"),n.a.createElement(y,null),n.a.createElement("h2",null,"Choose Y:"),n.a.createElement("input",{type:"text",value:this.props.y,placeholder:"      \u043e\u0442 -3 \u0434\u043e 3",onChange:function(t){return e.props.dispatch({type:"MAIN_SET_Y",value:t.target.value.replace(",",".")})}}),n.a.createElement("h2",null,"Choose R:"),n.a.createElement(b,null),n.a.createElement("br",null),n.a.createElement("button",{className:"submit-button",onClick:function(){return e.props.dispatch({type:"MAIN_ADD_POINT",value:{x:e.props.x,y:e.props.y,r:e.props.r}})},disabled:""===this.props.y||"-"===this.props.y||"."===this.props.y},"Check"),n.a.createElement("button",{className:"submit-button",onClick:this.exit},"Logout"),n.a.createElement("br",null),n.a.createElement(N,null))}}]),t}(n.a.Component),w=Object(l.b)((function(e){return{user:e.appState.user,x:e.mainState.xField,y:e.mainState.yField,r:e.mainState.rField}}))(P),C=Object(v.f)((function(e){return n.a.createElement(w,{history:e.history,store:e.store})})),R=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).redirectToLogin=function(){a.props.history.push("/login")},a.register=function(){a.props.dispatch({type:"APP_REGISTER",value:{history:a.props.history}})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"main"},n.a.createElement("h1",null,"Registration"),n.a.createElement("h2",null,"Username:"),n.a.createElement("input",{type:"text",value:this.props.login,onChange:function(t){return e.props.dispatch({type:"REGISTER_SET_LOGIN",value:t.target.value.replace(" ","")})}}),n.a.createElement("div",{className:this.props.loginError?"warn":"hidden"},"This username is already taken"),n.a.createElement("h2",null,"Password:"),n.a.createElement("input",{type:"password",value:this.props.password,onChange:function(t){return e.props.dispatch({type:"REGISTER_SET_PASSWORD",value:t.target.value})}}),n.a.createElement("h2",null,"Repeat password:"),n.a.createElement("input",{type:"password",value:this.props.rPassword,onChange:function(t){return e.props.dispatch({type:"REGISTER_SET_R_PASSWORD",value:t.target.value})}}),n.a.createElement("br",null),n.a.createElement("div",{className:this.props.passwordError?"warn":"hidden"},"Make sure that the password and its confirmation match"),n.a.createElement("button",{className:"submit-button",onClick:this.register,disabled:!this.props.formCorrect},"Confirm"),n.a.createElement("button",{className:"submit-button",onClick:this.redirectToLogin},"Back"))}}]),t}(n.a.Component),I=Object(l.b)((function(e){return{user:e.appState.user,login:e.registerState.login,password:e.registerState.password,rPassword:e.registerState.rPassword,passwordError:e.registerState.passwordError,loginError:e.registerState.loginError,formCorrect:e.registerState.formCorrect}}))(R),A=Object(v.f)((function(e){var t=e.history;return n.a.createElement(I,{history:t})})),j=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(x,null),n.a.createElement(v.c,null,n.a.createElement(v.a,{exact:!0,path:"/login",component:g}),n.a.createElement(v.a,{exact:!0,path:"/register",component:A}),n.a.createElement(v.a,{path:"/",component:C})))}}]),t}(n.a.Component),x=function(){return n.a.createElement("div",{className:"head"},n.a.createElement("span",{id:"head-title"},"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21164 \u0412\u0430\u0440\u0438\u0430\u043d\u0442 1000038"),n.a.createElement("br",null),n.a.createElement("span",{id:"head-author"},"\u041a\u0440\u0438\u0432\u043e\u0448\u0435\u0439\u043a\u0438\u043d \u0421\u0435\u0440\u0433\u0435\u0439 P3214"))},G=j,k=a(14),L=Object(k.c)({appState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOGIN_SUCCESS":return Object.assign({},e,{user:t.value});case"APP_LOGOUT":return Object.assign({},e,{user:null});case"APP_UPDATE_POINTS_SUCCESS":return Object.assign({},e,{points:t.value});case"APP_UPDATE_DRAWING_SUCCESS":return Object.assign({},e,{drawing:t.value});default:return e}},loginState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SET_LOGIN":return Object.assign({},e,{login:t.value,formCorrect:t.value.length>0&&e.password.length>0});case"LOGIN_SET_PASSWORD":return Object.assign({},e,{password:t.value,formCorrect:t.value.length>0&&e.login.length>0});case"LOGIN_SET_ERROR":return Object.assign({},e,{error:t.value});case"APP_LOGIN_SUCCESS":return Object.assign({},e,{error:!1,login:"",password:"",formCorrect:!1});default:return e}},registerState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_SET_LOGIN":return Object.assign({},e,{login:t.value,formCorrect:t.value.length>0&&e.password.length>0&&e.rPassword.length>0});case"REGISTER_SET_PASSWORD":return Object.assign({},e,{password:t.value,formCorrect:t.value.length>0&&e.login.length>0&&e.rPassword.length>0});case"REGISTER_SET_R_PASSWORD":return Object.assign({},e,{rPassword:t.value,formCorrect:t.value.length>0&&e.login.length>0&&e.password.length>0});case"REGISTER_SET_LOGIN_ERROR":return Object.assign({},e,{loginError:t.value});case"REGISTER_SET_PASSWORD_ERROR":return Object.assign({},e,{passwordError:t.value});case"APP_REGISTER_SUCCESS":return{login:"",password:"",rPassword:"",loginError:!1,passwordError:!1,formCorrect:!1};default:return e}},mainState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MAIN_SET_X":return Object.assign({},e,{xField:Number(t.value)});case"MAIN_SET_Y":return(Number(t.value)||0===Number(t.value)&&""!==t.value)&&!t.value.match(/^-*[0-9]*\.$/)&&Number(t.value)>=-3&&Number(t.value)<=3?Object.assign({},e,{yField:Number(t.value)}):"-"===t.value||""===t.value||"."===t.value||t.value.match(/^-*[0-9]*\.$/)&&Number(t.value)>=-3&&Number(t.value)<=3?Object.assign({},e,{yField:t.value}):e;case"MAIN_SET_R":return 0===Number(t.value)?(alert("\u0420\u0430\u0434\u0438\u0443\u0441 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0440\u0430\u0432\u0435\u043d 0, \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0430 \u0437\u0430\u043c\u0435\u043d\u0430 \u043d\u0430 1"),Object.assign({},e,{rField:1})):Object.assign({},e,{rField:Number(t.value)});case"APP_LOGOUT":return{xField:-3,yField:"",rField:1};case"MAIN_SET_CHANGE_X":return(Number(t.value)||0===Number(t.value)&&""!==t.value)&&!t.value.match(/^-*[0-9]*\.$/)&&Number(t.value)>=-4&&Number(t.value)<=4?Object.assign({},e,{xChange:Number(t.value)}):"-"===t.value||""===t.value||"."===t.value||t.value.match(/^-*[0-9]*\.$/)&&Number(t.value)>=-4&&Number(t.value)<=4?Object.assign({},e,{xChange:t.value}):e;case"MAIN_SET_CHANGE_Y":return(Number(t.value)||0===Number(t.value)&&""!==t.value)&&!t.value.match(/^-*[0-9]*\.$/)&&Number(t.value)>=-3&&Number(t.value)<=3?Object.assign({},e,{yChange:Number(t.value)}):"-"===t.value||""===t.value||"."===t.value||t.value.match(/^-*[0-9]*\.$/)&&Number(t.value)>=-3&&Number(t.value)<=3?Object.assign({},e,{yChange:t.value}):e;case"MAIN_SET_CURRENT_POINT":return Object.assign({},e,{currentPoint:Number(t.value.id)});default:return e}}}),M=function(e,t){var a={login:e.getState().loginState.login,password:e.getState().loginState.password},r=new XMLHttpRequest;r.open("POST","".concat(ee,"/login"),!0),r.onload=function(){return D(r.responseText,e,t)},r.onerror=function(){return alert("\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d")},r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send("username=".concat(a.login,"&password=").concat(a.password))},D=function(e,t,a){200===JSON.parse(e).status?(window.localStorage.setItem("user",t.getState().loginState.login),t.dispatch({type:"APP_LOGIN_SUCCESS",value:t.getState().loginState.login}),a.push("/")):t.dispatch({type:"LOGIN_SET_ERROR",value:!0})},U=function(e){return function(t){return function(a){switch(a.type){case"APP_LOGIN":return M(e,a.value.history),t(a);default:t(a)}}}},F=function(e,t){e.getState().registerState.password===e.getState().registerState.rPassword?(e.dispatch({type:"REGISTER_SET_PASSWORD_ERROR",value:!1}),H(e,t)):e.dispatch({type:"REGISTER_SET_PASSWORD_ERROR",value:!0})},H=function(e,t){var a={login:e.getState().registerState.login,password:e.getState().registerState.password},r=new XMLHttpRequest;r.open("POST","".concat(ee,"/register"),!0),r.onload=function(){return X(r.responseText,e,t)},r.onerror=function(){return alert("\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d")},r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify({username:a.login,password:a.password}))},X=function(e,t,a){200===JSON.parse(e).status?t.dispatch({type:"APP_REGISTER_SUCCESS",value:{history:a}}):t.dispatch({type:"REGISTER_SET_LOGIN_ERROR",value:!0})},W=function(e){return function(t){return function(a){switch(a.type){case"APP_REGISTER":return F(e,a.value.history),t(a);case"APP_REGISTER_SUCCESS":return e.dispatch({type:"LOGIN_SET_LOGIN",value:e.getState().registerState.login}),e.dispatch({type:"LOGIN_SET_PASSWORD",value:e.getState().registerState.password}),e.dispatch({type:"APP_LOGIN",value:{history:a.value.history}}),t(a);default:t(a)}}}},q=function(e,t,a){var r=[],n=!0,o=!1,s=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value,c=u.x,p=u.y;r.push({x:c,y:p,ch:c>=0&&c<=a&&p<=0&&p>=-a||c>=0&&p>=0&&c*c+p*p<=a*a||c<=0&&p<=0&&p>=-2*c-a})}}catch(h){o=!0,s=h}finally{try{n||null==l.return||l.return()}finally{if(o)throw s}}e.dispatch({type:"APP_UPDATE_DRAWING_SUCCESS",value:r})},Y=function(e,t){var a=new XMLHttpRequest;a.open("GET","".concat(ee,"/show"),!0),a.onload=function(){return z(a.responseText,e,t)},a.onerror=function(){return alert("\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0443\u043f\u0435\u043d")},a.send()},J=function(e,t){var a=new XMLHttpRequest;a.open("POST","".concat(ee,"/add"),!0),a.onload=function(){return z(a.responseText,e)},a.onerror=function(){return alert("\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0443\u043f\u0435\u043d")},a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(t))},B=function(e,t){var a=new XMLHttpRequest;a.open("POST","".concat(ee,"/update"),!0),a.onload=function(){z(a.responseText,e),e.dispatch({type:"MAIN_SET_CURRENT_POINT",value:{id:0}})},a.onerror=function(){return alert("\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0443\u043f\u0435\u043d")},a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(t))},$=function(e,t){var a=new XMLHttpRequest;a.open("POST","".concat(ee,"/delete"),!0),a.onload=function(){z(a.responseText,e),e.dispatch({type:"MAIN_SET_CURRENT_POINT",value:{id:0}})},a.onerror=function(){return alert("\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0443\u043f\u0435\u043d")},a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify({id:t.id}))},z=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.startsWith("{")){var r=JSON.parse(e);200===r.status?t.dispatch({type:"APP_UPDATE_POINTS_SUCCESS",value:r.answer}):a&&(alert(a),t.dispatch({type:"APP_LOGOUT",value:{history:a}}))}else t.dispatch({type:"APP_LOGOUT",value:{history:a}})},K=function(e){return function(t){return function(a){switch(a.type){case"APP_LOGOUT":var r=new XMLHttpRequest;return r.open("GET","".concat(ee,"/logout"),!0),r.send(),window.localStorage.setItem("user",null),a.value.history.push("/login"),t(a);case"APP_GET_POINTS":return Y(e,a.value.history),t(a);case"MAIN_ADD_POINT":return J(e,a.value),e.dispatch({type:"MAIN_SET_Y",value:""}),t(a);case"APP_UPDATE_POINTS_SUCCESS":return q(e,a.value,e.getState().mainState.rField),t(a);case"MAIN_SET_R":return 0===Number(a.value)?(q(e,e.getState().appState.points,1),t(a)):(q(e,e.getState().appState.points,Number(a.value)),t(a));case"MAIN_SET_CURRENT_POINT":if(0!==a.value.id){var n=a.value;e.dispatch({type:"MAIN_SET_CHANGE_X",value:""+n.x}),e.dispatch({type:"MAIN_SET_CHANGE_Y",value:""+n.y})}else e.dispatch({type:"MAIN_SET_CHANGE_X",value:""}),e.dispatch({type:"MAIN_SET_CHANGE_Y",value:""});return t(a);case"MAIN_UPDATE_POINT":var o=a.value.pointHistoryElements.concat().sort((function(e,t){return t.date-e.date}))[0];return Number(e.getState().mainState.xChange)!==Number(o.x)||Number(e.getState().mainState.yChange)!==Number(o.y)?B(e,{id:e.getState().mainState.currentPoint,x:e.getState().mainState.xChange,y:e.getState().mainState.yChange}):e.dispatch({type:"MAIN_SET_CURRENT_POINT",value:{id:0}}),t(a);case"MAIN_DELETE_POINT":return $(e,a.value),e.dispatch({type:"MAIN_SET_CURRENT_POINT",value:{id:0}}),t(a);default:return t(a)}}}},Q=Object(k.a)(U,W,K),V={appState:{user:window.localStorage.getItem("user"),points:[],drawing:[]},loginState:{login:"",password:"",error:!1,formCorrect:!1},registerState:{login:"",password:"",rPassword:"",loginError:!1,passwordError:!1,formCorrect:!1},mainState:{xField:-3,yField:"",rField:1,xChange:"",yChange:"",currentPoint:0}},Z=Object(k.d)(L,V,Q);a.d(t,"DEFAULT_URL",(function(){return ee}));var ee="http://"+window.location.host;s.a.render(n.a.createElement(i.a,null,n.a.createElement(l.a,{store:Z},n.a.createElement(G,null))),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.0ae5f551.chunk.js.map